# Editor Issues Report

Generated by automated human-typing tests on 2024-12-05.

These issues were discovered by the `e2e/human-typing.spec.ts` test suite which simulates realistic human typing behavior including typos, corrections, and various editing operations.

## Critical Issues

### 1. Backspace Corrections Don't Work Properly

**Severity:** Critical

**Observed:** When typing "Ediotr" and using backspace to correct to "Editor", the result is "Ediotor" - the correction fails.

**Evidence:**
```
Typed: # Ediotr
Expected after correction: # Editor Test Report
Actual result: # Ediotor Tets Report
```

**Root Cause:** The cursor position after backspace appears to be incorrect, causing retyped characters to be inserted at the wrong position.

---

### 2. First Character Gets Lost After Corrections

**Severity:** Critical

**Observed:** After making corrections with backspace, the first character of new text is often lost.

**Evidence:**
```
Typed: "Ths text has **bold**"
Expected: "This text has **bold**"
Actual: "hs text has **bold**" (missing "T")
```

---

### 3. Arrow Key Navigation Broken

**Severity:** Critical

**Observed:** The Home key and arrow keys don't move the cursor correctly.

**Evidence:**
```
Test: Type "The quick brown fox", then Home + ArrowRight*4 + Delete*6 + type "fast "
Expected: "The fast brown fox jumps over the lazy dog."
Actual: "The quick brown fox jumps over the fast og."
```

The cursor stayed at the end instead of moving to the beginning.

---

## Major Issues

### 4. Numbered List Auto-Numbering Duplication

**Severity:** High

**Observed:** When typing numbered lists manually (1., 2., 3.), the editor's auto-numbering adds duplicate numbers.

**Evidence:**
```
Typed: "2. Second item"
Displayed: "2.2. Second item"

Typed: "3. Third item"
Displayed: "3.3. Third item"
```

**Root Cause:** The editor auto-inserts list numbers without detecting manually typed numbers.

---

### 5. Bullet List Formatting Inconsistency

**Severity:** High

**Observed:** Bullet lists show inconsistent bullet styles (mix of "•" and "-").

**Evidence:**
```
- Frist bullet wiht typo  → •Frist bullet wiht typo
- Scond bullet           → •- Scond bullet-
- Third bullet           → • Third bullet
```

Some items retain the markdown "-" syntax alongside the bullet point.

---

### 6. Bold/Italic Markdown Not Rendering

**Severity:** High

**Observed:** Typing `**bold**` or `*italic*` markdown syntax does not render as formatted text.

**Evidence:**
```
Typed: "This text has **bold** and *italic* formatting."
Result: Stays as literal markdown text
Bold elements found: 0
Italic elements found: 0
```

---

### 7. Code Block Formatting Broken

**Severity:** High

**Observed:** Code blocks with triple backticks are not properly parsed.

**Evidence:**
```
Typed:
```javascript
function test() {
  return "hello";
}
```

Result:
```javascript
fucntion test() {
 reutrn "hello";}
`
``
```

The closing backticks are split across lines.

---

### 8. Wikilink Popup Blocks Input

**Severity:** High

**Observed:** Typing `[[` triggers the wikilink suggestion popup which blocks further keyboard input.

**Evidence:** Test times out when attempting to type `[[Welcoem]]`. Had to skip wikilink tests.

**Root Cause:** The popup intercepts keyboard events and doesn't properly handle continued typing.

---

## Minor Issues

### 9. Copy/Paste Only Partially Working

**Severity:** Medium

**Observed:** Copy/paste via Cmd+C/Cmd+V works but content appears only once (not duplicated as expected).

**Evidence:**
```
Typed: "Copy this text please."
Cmd+A, Cmd+C, Enter, Enter, Cmd+V
Expected: Content appears twice
Actual: "Copy this text" appears 1 time
```

---

### 10. Enter Key Creates Strange Characters

**Severity:** Medium

**Observed:** Pressing Enter sometimes inserts invisible characters or "﻿#" artifacts.

**Evidence:**
```
After typing numbered list items:
"1.Frist item - tpying test
2.
#"
```

The "﻿" is a zero-width no-break space (U+FEFF) and "#" appears unexpectedly.

---

### 11. Multi-line Delete Not Working Properly

**Severity:** Medium

**Observed:** Selecting multiple lines and deleting only removes part of the content.

**Evidence:**
```
Before: "Line one\nLine two\nLine three\nLine four"
After Shift+Down*2 + Backspace: "Line oneL\nine twoL\nine threeL\nine fou"
```

The selection/deletion doesn't respect line boundaries.

---

### 12. Undo/Redo Limited Functionality

**Severity:** Medium

**Observed:** Undo (Cmd+Z) and Redo (Cmd+Shift+Z) don't properly restore previous states.

**Evidence:**
```
Typed: "First sentence." Enter "Second sentence."
After Undo: "First sentence.S" (partial undo)
After second Undo: "First sentence."
After Redo: "First sentence.S" (doesn't fully redo)
```

---

## Test Coverage Summary

| Test | Status | Issues Found |
|------|--------|--------------|
| Realistic document writing | Pass | 8 issues |
| Arrow key navigation | Pass | 1 issue |
| Undo/redo operations | Pass | 1 issue |
| Copy/paste operations | Pass | 1 issue |
| Multi-line selection/deletion | Pass | 1 issue |
| Rapid character deletion | Pass | 0 issues |
| Special characters | Pass | 0 issues |

## Recommendations

### Immediate Priority
1. Fix backspace/cursor position handling
2. Fix Home/End/Arrow key navigation
3. Fix wikilink popup blocking input

### High Priority
4. Fix numbered/bullet list auto-formatting
5. Implement inline markdown rendering (bold/italic)
6. Fix code block parsing

### Medium Priority
7. Improve undo/redo reliability
8. Fix copy/paste functionality
9. Clean up invisible character insertion

## How to Run These Tests

```bash
# Run all human typing tests
npx playwright test e2e/human-typing.spec.ts

# Run with visible browser
npx playwright test e2e/human-typing.spec.ts --headed

# Run specific test
npx playwright test e2e/human-typing.spec.ts --grep "arrow key"
```

## Related Files

- `e2e/human-typing.spec.ts` - Human typing simulation tests
- `src/components/Editor/Editor.tsx` - Main editor component
- Yoopta Editor library - Third-party rich text editor
