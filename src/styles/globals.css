@tailwind base;
@tailwind components;
@tailwind utilities;

/* Light Theme (Default) */
:root {
  /* Base */
  --bg-primary: #ffffff;
  --bg-secondary: #f8f9fa;
  --bg-tertiary: #f1f3f4;
  --bg-elevated: #ffffff;

  /* Text */
  --text-primary: #1a1a1a;
  --text-secondary: #6b7280;
  --text-tertiary: #9ca3af;
  --text-inverse: #ffffff;

  /* Borders */
  --border-subtle: #e5e7eb;
  --border-default: #d1d5db;
  --border-strong: #9ca3af;

  /* Accents */
  --accent-primary: #6366f1;
  --accent-primary-hover: #4f46e5;
  --accent-secondary: #8b5cf6;
  --accent-success: #22c55e;
  --accent-warning: #f59e0b;
  --accent-danger: #ef4444;

  /* Graph-specific */
  --node-default: #e0e7ff;
  --node-selected: #6366f1;
  --node-hover: #c7d2fe;
  --edge-default: #94a3b8;

  /* Sidebar width */
  --sidebar-width: 280px;
  --sidebar-collapsed-width: 60px;

  /* Title bar height */
  --titlebar-height: 28px;

  /* Status bar height */
  --statusbar-height: 24px;

  /* Contextual panel width */
  --contextual-panel-width: 300px;
}

/* Dark Theme */
.dark {
  /* Base */
  --bg-primary: #0f0f0f;
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #262626;
  --bg-elevated: #1f1f1f;

  /* Text */
  --text-primary: #f5f5f5;
  --text-secondary: #a3a3a3;
  --text-tertiary: #737373;
  --text-inverse: #0f0f0f;

  /* Borders */
  --border-subtle: #262626;
  --border-default: #404040;
  --border-strong: #525252;

  /* Accents - slightly more saturated for dark mode */
  --accent-primary: #818cf8;
  --accent-primary-hover: #6366f1;
  --accent-secondary: #a78bfa;
  --accent-success: #4ade80;
  --accent-warning: #fbbf24;
  --accent-danger: #f87171;

  /* Graph-specific */
  --node-default: #312e81;
  --node-selected: #818cf8;
  --node-hover: #4338ca;
  --edge-default: #64748b;
}

/* Base styles */
@layer base {
  html {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-bg-primary text-text-primary;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }

  /* Yoopta action menu dark mode - for portals rendered outside .dark container */
  html.dark .yoopta-action-menu-list,
  body.dark .yoopta-action-menu-list,
  .dark .yoopta-action-menu-list {
    background-color: #1f1f1f !important;
    border-color: #404040 !important;
  }

  html.dark .yoopta-action-menu-list [class*="title"],
  body.dark .yoopta-action-menu-list [class*="title"],
  .dark .yoopta-action-menu-list [class*="title"] {
    color: #f5f5f5 !important;
  }

  html.dark .yoopta-action-menu-list [class*="description"],
  body.dark .yoopta-action-menu-list [class*="description"],
  .dark .yoopta-action-menu-list [class*="description"] {
    color: #a3a3a3 !important;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background-color: var(--bg-secondary);
  }

  ::-webkit-scrollbar-thumb {
    background-color: var(--border-default);
    border-radius: 9999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--border-strong);
  }

  /* Focus visible states - exclude editor elements */
  *:focus-visible:not(.yoopta-editor *):not([data-yoopta-block]):not([contenteditable]) {
    @apply outline-none ring-2 ring-accent-primary ring-offset-2 ring-offset-bg-primary;
  }
}

@layer components {
  /* Button styles */
  .btn {
    @apply px-4 py-2 rounded-md font-medium transition-all duration-fast;
    @apply hover:scale-[1.02] active:scale-[0.98];
  }

  .btn-primary {
    @apply btn bg-accent-primary text-white;
    @apply hover:bg-accent-primary-hover;
  }

  .btn-secondary {
    @apply btn bg-bg-secondary text-text-primary;
    border: 1px solid var(--border-default);
    @apply hover:bg-bg-tertiary;
  }

  .btn-ghost {
    @apply btn bg-transparent text-text-secondary;
    @apply hover:bg-bg-secondary hover:text-text-primary;
  }

  /* Input styles */
  .input {
    @apply w-full px-3 py-2 rounded-md bg-bg-primary text-text-primary placeholder:text-text-tertiary;
    border: 1px solid var(--border-default);
    @apply focus:ring-1 focus:ring-accent-primary;
    @apply transition-colors duration-fast;
  }

  .input:focus {
    border-color: var(--accent-primary);
  }

  /* Panel styles */
  .panel {
    @apply bg-bg-elevated rounded-lg shadow-md;
    border: 1px solid var(--border-subtle);
  }

  /* Card styles */
  .card {
    @apply bg-bg-elevated rounded-lg p-4;
    border: 1px solid var(--border-subtle);
    @apply transition-shadow duration-fast;
    @apply hover:shadow-md;
  }

  /* Sidebar item */
  .sidebar-item {
    @apply flex items-center gap-2 px-3 py-2 rounded-md cursor-pointer;
    @apply text-text-secondary transition-colors duration-fast;
    @apply hover:bg-bg-tertiary hover:text-text-primary;
  }

  .sidebar-item.active {
    @apply text-accent-primary;
    background-color: rgba(99, 102, 241, 0.1);
  }
}

@layer utilities {
  /* Title bar drag region for Tauri */
  .titlebar-drag {
    -webkit-app-region: drag;
  }

  .titlebar-no-drag {
    -webkit-app-region: no-drag;
  }

  /* Truncate text with ellipsis */
  .truncate-lines-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-lines-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Animation delays for staggered children */
  .stagger-1 { animation-delay: 50ms; }
  .stagger-2 { animation-delay: 100ms; }
  .stagger-3 { animation-delay: 150ms; }
  .stagger-4 { animation-delay: 200ms; }
  .stagger-5 { animation-delay: 250ms; }
}
